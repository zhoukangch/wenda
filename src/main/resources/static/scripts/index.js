define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/index",["ncPlugin/kindeditor/kindeditor","ncPlugin/kindeditor/kindeditor/themes/nowcoder/nowcoder.css","nc","cpn","../../../core/siteConfig"],function(a,b,c){function d(a,b){if(a=G(a),0!==a.length){var c=(a.prop("tagName")||"").toLowerCase(),d="input"===c||"textarea"===c;return new N(K.extend({renderTo:a,renderBy:"replaceWith",content:d?a.val():"",height:Math.max(a.outerHeight(),200)},b))}}function e(){var a=this;a._createdQueue=[]}function f(){var a=this;a._initKePlugin();var b=a.getEl(),c=G("<div></div>");b.append(c);var d=a.keEditor=E.create(c.get(0),a._getConf()),e=d.html;d.html=function(a){return a?(a=a.replace(/\u00A0/g,"&nbsp;"),e.call(this,a)):e.apply(this,arguments)}}function g(){var b=this;b.waitCreated(function(){var c="toolbar,md,autoLink,imageBar,placeholder,uploadPaste,uploadRemote,codeName,defaultAction,monitContent,autoHeight,at".split(",");K.forEach(c,function(c){a.async("./plugin/"+c,function(a){new a(b)})})})}function h(){var a=this,b=a.rawConfig,c=a.getEl();a._initEvent||(a._initEvent=!0,a.listen("afterCreate",function(){a._afterCreate||(a._afterCreate=!0,b.content&&a.val(b.content),K.forEach(a._createdQueue,function(b){b&&b.call(a)}),a._createdQueue.length=0,c.on("click","div.js-editor-mask",function(){try{b.clickMask&&b.clickMask.call(a)}catch(c){}}),b.afterCreate&&b.afterCreate.call(a))}),a.listen("afterChange",function(){var c=a.keEditor,d=c.edit.cmd.range,e=a.isInTagNode(d.startContainer,"blockquote")||a.isInTagNode(d.endContainer,"blockquote");e?c.toolbar.select("bockquote"):c.toolbar.unselect("bockquote");var f=a.isInTagNode(d.startContainer,"pre")||a.isInTagNode(d.endContainer,"pre");c.edit.designMode&&(f?(c.toolbar.disableAll(!0,["source","codeblock"]),c.toolbar.select("codeblock")):(c.toolbar.disableAll(!1),c.toolbar.unselect("codeblock"))),b.afterChange&&b.afterChange.call(a)}),a.listen("afterBlur",function(){b.afterBlur&&b.afterBlur.call(a)}),a.listen("afterFocus",function(){b.afterFocus&&b.afterFocus.call(a)}))}function i(){var a=this;return a.keEditor.html.apply(a.keEditor,arguments)}function j(){var a=this;return a.keEditor.text.apply(a.keEditor,arguments)}function k(){var a=this;return a.keEditor.count("text")}function l(){var a=this;try{a.keEditor.blur()}catch(b){}}function m(){var a=this;try{a.keEditor.focus()}catch(b){}}function n(a){var b=this,c=b.getEl();b.waitCreated(function(){var b=c.find(".js-editor-mask");return a===!1?b.hide():(0===b.length&&(b=G('<div class="js-editor-mask" style="background:#fff;opacity:0;filter:alpha(opacity=0);position:absolute;width:100%;height:100%;top:0;left:0;z-index:999;"></div>'),c.append(b)),void b.show())})}function o(){var a=this;return a.keEditor.isEmpty()}function p(a,b){var c=this,d=c.rawConfig,e=c.getEl();c.waitCreated(function(){var f=c.keEditor;if(a&&e.outerWidth(a),c.getEditorEl().width("auto"),b){var g=c.getToolbarEl(),h=g.outerHeight(),i=!d.noAutoHeight;b=Math.max(b-h-2,0),i&&(f.edit._editHeight=b+"px"),i&&c.autoHeight(),!i&&f.edit.setHeight(b)}})}function q(a){var b=this,c=b.rawConfig,d=b.keEditor,e=b.getEditorDoc();if(!c.noAutoHeight){if(!a){var f=b.getEditorEl();a=L.getScrollParent(f),a=G(a?a:window)}var g=a.scrollTop();d.edit.setHeight(1);var h=e.body.scrollHeight;G(b.getEditorDoc().body).css("overflow","hidden"),b.getEditorEditEl().css("overflow","hidden").height(1),h=Math.max(h,e.body.scrollHeight);var i=b._lastHeight?h-b._lastHeight:0;b._lastHeight=h;var j=parseInt(d.edit._editHeight||0,10)||0;h=Math.max(h,j),d.edit.setHeight(h),a.scrollTop(g+(h===j?0:i))}}function r(a){var b=this,c=b.keEditor;c&&c.isCreated?a&&a.call(b):b._createdQueue.push(a)}function s(){var a=this;return a.keEditor}function t(){var a=this;return a.keEditor.edit.doc}function u(){var a=this;return a.keEditor.edit.win}function v(){var a=this;return G(a.keEditor.container[0])}function w(){var a=this;return G(a.keEditor.edit.div)}function x(){var a=this;return G(a.keEditor.toolbar.div.get(0))}function y(){for(var a=this,b=a.keEditor.cmd.range.startContainer;b&&1!==b.nodeType;)b=b.parentNode;return b}function z(a,b){if(!a||!b)return!1;var c=!1;b=b.toLowerCase();try{for(;a;){var d=(a.tagName||"").toLowerCase();if(d&&d===b){c=!0;break}a=a.parentNode}}catch(e){}return c}function A(){var a=this,b=G(a.getEditorDoc());b.find("#kePlaceholder").remove()}function B(a){var b=this,c=b.getEl(),d=b.getEditorDoc(),e=G(d.body),f=L.getPosTop(a,e),g=L.getPosLeft(a,e),h=L.getPosTop(c),i=L.getPosLeft(c),j=b.getToolbarEl().outerHeight(),k=e.scrollTop(),l=e.scrollLeft();return{top:f+h+j-k,left:g+i-l}}function C(){var a=this,b=a.rawConfig,c=K.clone(H.get());c.type=M.uploadType.image,c.token=H.get("csrf_token");var d={allowNCFileUpload:!0,allowFileManager:!0,themeType:"nowcoder",uploadJson:"/uploadImage",extraFileUploadParams:c,resizeType:0,height:(b.height||300)+"px",newlineTag:"div",cssData:['body{background-color:transparent;font-family:arial,STHeiti,"Microsoft YaHei";line-height:1.8}',"p{line-height:1.8}","h1,h2,h3,h4,h5,h6{margin:10px 0}","img{max-width:100%}",'blockquote{position:relative;color: #999;font-weight:300;font-family:Avenir, "Helvetica Neue", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", sans-serif;border-left:2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;}',"pre{font-size: 14px;position: relative;border-left: 2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;background: #fefefe;word-break:break-all;}","a{color:#25bb9b;text-decoration:none;}"].join(""),items:"source,preview,|,bold,italic,underline,|,bockquote,codeblock,insertorderedlist,insertunorderedlist,|,image,|,table,subscript,superscript,math,removeformat".split(","),htmlTags:{span:".color,.font-weight,.text-decoration,.vertical-align".split(","),div:"class,id,align,.margin,.padding,.text-align,.color,.font-weight,.text-decoration,.vertical-align".split(","),table:"border,cellspacing,cellpadding,height,align,bordercolor,.padding,.margin,.border,bgcolor,.text-align,.color,.background-color,.font-weight,.text-decoration,.background,.height,.border-collapse".split(","),"td,th":"align,valign,width,height,colspan,rowspan,bgcolor,.text-align,.color,.background-color,.font-weight,.text-decoration,.vertical-align,.background,.border".split(","),a:"href,target,name,data-card-uid,class".split(","),embed:"src,width,height,wmode,name,allowfullscreen,flashvars,type,loop,autostart,quality,.width,.height,align,allowscriptaccess".split(","),object:"classid,width,height,id".split(","),param:"name,value".split(","),img:"class,id,src,width,height,border,alt,title,align,.width,.height,.border".split(","),"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":"align,.text-align,.color,.font-weight,.text-decoration,.vertical-align,.text-indent,.margin-left".split(","),pre:["class"],hr:"class,.page-break-after".split(","),iframe:"frameborder,width,height,src,allowfullscreen".split(","),"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]}},e=K.extend(d,b.keConf,{placeholder:b.placeholder,afterCreate:function(){a.keEditor=a.keEditor||this,a.fire("afterCreate")},afterChange:function(){a.keEditor=a.keEditor||this,a.waitCreated(function(){a.fire("afterChange")})},afterBlur:function(){a.keEditor=a.keEditor||this,a.fire("afterBlur")},afterFocus:function(){a.keEditor=a.keEditor||this,a.fire("afterFocus")}});return b.isAdmin&&(e.items="source,preview,|,bold,italic,underline,forecolor,|,bockquote,codeblock,insertorderedlist,insertunorderedlist,link,|,image,|,table,subscript,superscript,math,removeformat".split(",")),b.noCodeSelect||K.forReverse(e.items,function(a,b){"codeblock"===a&&e.items.splice(b,1)}),e}function D(){var a=this;N._initKePlugin||(N._initKePlugin=!0,E.plugin("bockquote",function(){var b=this;b.clickToolbar("bockquote",function(){G("#kePlaceholder",b.edit.doc).remove(),b.select();var c=b.cmd.commonNode({blockquote:"*"});if(c){var d=b.cmd.range.createBookmark();c.remove(!0),b.cmd.range.moveToBookmark(d)}else{b.cmd.indent();var c=b.cmd.commonNode({blockquote:"*"});if(c){try{b.cmd.range.selectNodeContents(c),b.cmd.removeformat()}catch(e){}c.removeAttr("style"),!c.next()&&c.after("<br />")}}b.select(),a.fire("afterChange")})}),E.plugin("codeblock",function(){var b=this;b.clickToolbar("codeblock",function(){G("#kePlaceholder",b.edit.doc).remove(),b.select();var c=b.cmd.commonNode({pre:"*"});if(c){var d=b.cmd.range.createBookmark();c.remove(!0),b.cmd.range.moveToBookmark(d)}else{b.exec("formatblock","<pre>");var c=b.cmd.commonNode({pre:"*"});if(c){try{b.cmd.range.selectNodeContents(c),b.cmd.removeformat()}catch(e){}c.addClass("prettyprint"),!c.next()&&c.after("<br />")}}b.select(),a.fire("afterChange")})}))}a("ncPlugin/kindeditor/kindeditor"),a("ncPlugin/kindeditor/kindeditor/themes/nowcoder/nowcoder.css");var E=window.KindEditor,F=a("nc"),G=(a("cpn"),F.$),H=F.Cookie,I=F.Component,J=F.Clazz,K=(F.Browser,F.Base),L=F.Dom,M=a("../../../core/siteConfig"),N=c.exports=J.create();J.mix(N,I,{_template:'<div style="position:relative;"></div>',listeners:[{name:"render",type:"custom",handler:function(){{var a=this,b=a.rawConfig;a.getEl()}a.initEvent(),a.initPlugin(),!!b.disabled&&a.disable(),a.resize(b.width,b.height),a.initKe()}},{name:"destroy",type:"custom",handler:function(){var a=this;try{a.keEditor.remove()}catch(b){}}}],create:d},{initialize:e,initKe:f,initPlugin:g,initEvent:h,val:i,text:j,count:k,blur:l,focus:m,disable:n,isEmpty:o,resize:p,autoHeight:q,waitCreated:r,getEditor:s,getEditorDoc:t,getEditorWin:u,getEditorEl:v,getEditorEditEl:w,getToolbarEl:x,getCmdClosestEl:y,isInTagNode:z,removePlaceHolder:A,getElPos:B,_getConf:C,_initKePlugin:D})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/at",["nc","../../../../util/atList","cpn","../../../../action/message","../../../../util/ajax","../../../../core/siteConfig","../../../../util/util"],function(a,b,c){function d(a){var b=this;b.editor=a;var c=a.rawConfig;c.needAt&&(b.id=o.ascId(),b.initIpt(a))}function e(a){function b(){window.clearTimeout(f),f=window.setTimeout(function(){g.analyze()},h)}function c(){window.clearTimeout(f),f=window.setTimeout(function(){r.showList(g.id)},h)}function d(a){window.clearTimeout(f);var c=+a.keyCode,d={37:"left",38:"top",39:"right",40:"down",16:"shift",17:"ctrl",18:"option",91:"cmd"};return!d[c]&&g.cancelAt()?void a.preventDefault():{38:1,40:1,13:1}[c]?13===c&&i.isListMenuShow?a.preventDefault():void 0:b()}function e(a){g.cancelAt()&&a.preventDefault()}var f,g=this,h=150,i=r.getPool(g.id),j=n(a.getEditorDoc()),k=n(a.getEditorWin()),l=n(j).find("body");j.on("click",b),j.on("focus",b),j.on("keydown",d),k.on("blur",c),l.on("paste",e),l.on("cut",e),l.on("copy",e)}function f(){var a=this,b=a.editor,c=b.keEditor,d=a.getAtInfo();if(!d)return r.showList(a.id);var e=a.getPos(d.range);r.showList(a.id,{ipt:b.getEditorDoc(),text:d.text,pos:e,ext:{top:5},ok:function(d){{var e=b.getEditorDoc(),f=a.getAtInfo().range;"//"+(s.isInDev()?"d.":"www.")+"nowcoder.com/profile/"+d.id}c.insertHtml('​<a data-card-uid="'+d.id+'" href="javascript:void(0);">@'+d.nickname+'</a>&nbsp;<span id="jsNcAtTmpSpan"></span>'),f.deleteContents();try{var g=e.getElementById("jsNcAtTmpSpan");f=e.createRange(),f.selectNodeContents(g),f.collapse(!1);var h=b.getEditorWin().getSelection();h.removeAllRanges(),h.addRange(f),g.parentNode.removeChild(g)}catch(i){}}})}function g(){var a=this,b=a.editor,c=b.keEditor,d=c.cmd.range;if(d.collapsed&&!a.getAtNodeByRange(d)){for(var e,f=d.shrink().down().startContainer.data||"",g=d.startOffset-1,h=-1;g>=0&&(e=f[g],"@"===e&&(h=g),"@"!==e&&!/\s/.test(e));)g--;if(-1!==h){var i=d.cloneRange();return i.setStart(d.startContainer,h),{index:h,text:f.substring(h+1,d.startOffset),full:f.substring(h,d.startOffset),range:i}}}}function h(a){var b=this,c=b.editor,d=a.doc,e=d.createDocumentFragment(),f=d.getElementById("ncAtTmpHockSpan");f||(f=d.createElement("span"),f.id="ncAtTmpHockSpan"),f.innerHTML="@",e.appendChild(f),a.insertNode(e);var g=c.getElPos(f),h=n(f).outerHeight();return f.parentNode.removeChild(f),{top:g.top+h,left:g.left}}function i(){var a=this,b=a.editor,c=b.keEditor;c.cmd.selection();var d=c.cmd.range,e=d.collapsed,f=a.getAtNodeByRange(d),g=e?f:a.getAtNodeByRange(d,!0);if(f||g){var h=f,i=f!==g&&g?g:null,j=d.createBookmark();return h&&a.removeNode(h,!0),i&&a.removeNode(i,!0),d.moveToBookmark(j),c.select(),!0}}function j(a,b){var c=this,d=a[b?"endContainer":"startContainer"],e=a[b?"endOffset":"startOffset"];if(1===d.nodeType){var f=d.childNodes;if(e=e>0?e-1:0,f.length>e)return c.getAtNode(f[e])}return c.getAtNode(d)}function k(a){for(;a;){var b=(a.nodeName||"").toLowerCase(),c=(a.className||"",a.getAttribute?a.getAttribute("data-card-uid"):"");if("a"===b&&(c||""===c))break;a=a.parentNode}return a}function l(a,b){var c,d=(a||{}).parentNode;if(d){if(b&&a.hasChildNodes())for(;c=a.firstChild;)d.insertBefore(c,a);d.removeChild(a)}return a}var m=a("nc"),n=m.$,o=m.Base,p=(m.Dom,m.Clazz),q=c.exports=p.create(),r=a("../../../../util/atList"),s=a("../../../../util/util");o.extend(q.prototype,{initialize:d,initIpt:e,analyze:f,getAtInfo:g,getPos:h,cancelAt:i,getAtNodeByRange:j,getAtNode:k,removeNode:l})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/autoHeight",["nc"],function(a,b,c){function d(a){var b=a.rawConfig;if(!b.noAutoHeight){var c=a.getEditorEl(),d=h.getScrollParent(c);d=f(d?d:window);var e=a.val();a.listen("afterChange",function(){var b=a.val();if(e!==b){e=b;try{a.autoHeight(d)}catch(c){}}}),e&&f(a.getEditorDoc()).one("click",function(){a.autoHeight(d)})}}var e=a("nc"),f=e.$,g=e.Base,h=e.Dom,i=e.Clazz,j=c.exports=i.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/autoLink",["nc"],function(a,b,c){function d(a){if(!i.ie()){var b=a.getEditorDoc(),b=(a.keEditor,f(b));a.listen("afterBlur",function(){var b=a.val(),c=j.replaceLink(b);c!==b&&a.val(c)})}}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=e.Browser,j=(e.Str,e.Html),k=c.exports=h.create();g.extend(k.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/codeName",["nc"],function(a,b,c){function d(a){var b,c=a.keEditor,d=a.getEditorDoc(),e=a.getEditorWin();f(d).on("click","pre",function(h){if(h.shiftKey){var i=f(h.target),k=i.attr("class")||"",l=/lang-(.*)/.exec(k),m=l?l[1]||"":"",n=j(a.getEditorEditEl().get(0)).pos(),o=j(i.get(0)).pos(),p=f(e).scrollTop()||f(d.body).scrollTop(),q=n.y+(o.y<p?0:o.y-p);b=c.menu=new j.MenuClass({name:"codename",width:150,centerLineMode:!1,x:n.x+o.x,y:q,z:50}),f(b.div).css({"max-height":"200px","overflow-y":"auto"});var r=[{name:"ASP/VB",val:"vb"},{name:"C/C++",val:"cpp"},{name:"CSS",val:"css"},{name:"C#",val:"cs"},{name:"HTML",val:"html"},{name:"Java",val:"java"},{name:"JavaScript",val:"js"},{name:"Perl",val:"pl"},{name:"PHP",val:"php"},{name:"Python",val:"py"},{name:"Ruby",val:"rb"},{name:"Shell",val:"bsh"},{name:"XML",val:"xml"},{name:"Other",val:""}];g.forEach(r,function(a){b.addItem({title:'<span unselectable="on">'+a.name+"</span>",checked:m===a.val,click:function(){i.removeClass().addClass(a.val?"prettyprint lang-"+a.val:"prettyprint"),c.hideMenu()}})})}})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=c.exports=h.create(),j=window.KindEditor;g.extend(i.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/defaultAction",["nc","cpn","../../../../util/uploadRemote"],function(a,b,c){function d(a){var b=this,c=b.action=(a.rawConfig||{}).toolAction||{};b.initMath(a);var d=a.getEditor();k.forEach(c,function(a,b){d._handlers[b]=[a]})}function e(a){var b=this;k.extend(b.action,{clickToolbarmath:k.bind(b.math,b,a)}),j(a.getEditorDoc()).on("click","img",function(a){var c=j(a.currentTarget),d=c.attr("src"),e=m.getParam("tex",d);e&&b._formula(e,function(a){c.attr("src",a).attr("data-ke-src",a)})})}function f(a){var b=this;b._formula(null,function(b){a.getEditor().exec("insertimage",b)})}function g(a,b){o.show({value:a,upload:function(a,c,d){var e=this.showLoad();p.upload(c,function(f){e.close();var g=f&&f!==c;!g&&n.alert("出现错误，请重试"),g&&(f=m.addParam({tex:a},f),b&&b(f),d&&d())})}})}var h=a("nc"),i=a("cpn"),j=h.$,k=h.Base,l=h.Clazz,m=h.Uri,n=i.Popup,o=i.PopupFormula,p=a("../../../../util/uploadRemote"),q=c.exports=l.create();k.extend(q.prototype,{initialize:d,initMath:e,math:f,_formula:g})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/imageBar",["nc"],function(a,b,c){function d(a){var b=a.getEl(),c=f(['<div class="js-editor-img-bar editor-img-bar" style="display:none;width:60px;">','<a href="javascript:void(0);" title="放大" class="icon-zoom-in"></a>','<a href="javascript:void(0);" title="缩小" class="icon-zoom-out"></a>',"</div>"].join(""));f(document.body).append(c),a.listen("destroy",function(){c.remove()});var d,e=a.getEditorDoc();f(e).on("keydown",function(){window.clearTimeout(d),c.unbind("click").hide()}),f(e).on("click",function(a){window.clearTimeout(d),c.unbind("click").hide();var g=a.target,h=f(g).attr("src")||"";"img"!==(g.tagName||"").toLowerCase()||j.getParam("tex",h)||(d=window.setTimeout(function(){var a=g.width,d=g.height;if(a&&d){var h=i.getPosTop(g,e.body),j=i.getPosLeft(g,e.body),k=i.getPosTop(b),l=i.getPosLeft(b);c.css("top",k+h+40).css("left",l+j+1).show();var m=null;c.on("click","a.icon-zoom-in",function(){var a=f(g).width();f(g).removeAttr("width height").height("auto"),m=m||f(g).width("auto").width();var b=(Math.round(10*a/m)+1)/10;f(g).width(b>5?a:m*b)}),c.on("click","a.icon-zoom-out",function(){var a=f(g).width();f(g).removeAttr("width height").height("auto"),m=m||f(g).width("auto").width();var b=(Math.round(10*a/m)-1)/10;f(g).width(.1>b?a:m*b)})}},25))}),f(document.body).on("click",function(a){var b=a.target;b===c.get(0)||f.contains(c.get(0),b)||(window.clearTimeout(d),c.unbind("click").hide())})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=e.Dom,j=e.Uri,k=c.exports=h.create();g.extend(k.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/md",["nc","cpn"],function(a,b,c){function d(a){var b=this;b.editor=a;var c=a.rawConfig;if(c.needChangeEditor){var d=h('<a class="ico-to-html js-2-md">使用MD编辑器</a>');a.getToolbarEl().prepend(d),d.on("click",function(){b.changeEditor()})}}function e(){function b(a){var b=new a({renderTo:f,renderBy:"after",isAdmin:e.isAdmin,content:a.html2md(g),needChangeEditor:!0,needAt:!!e.needAt,afterChangeEditor:e.afterChangeEditor,width:e.width,height:e.height,draftChange:e.draftChange,disabled:e.disabled,clickMask:e.clickMask,noToolbarFixed:e.noToolbarFixed,toolbarFixedTop:e.toolbarFixedTop,noAutoHeight:e.noAutoHeight,render:function(){d.destroy()}});e.afterChangeEditor&&e.afterChangeEditor.call(d,b),d.fire("changeEditor",b),f.hide()}var c=this,d=c.editor,e=d.rawConfig,f=d.getEl(),g=d.val();return d.isEmpty()?void a.async("../../mdEditor",function(a){b(a)}):void a.async("../../mdEditor",function(a){var c=k.confirm('切换到 MarkDown 编辑器可能会丢失部分内容格式，确认切换？<a class="link-green" href="javascript:void(0);">预览转换后的效果</a>',function(){b(a)});c&&c.getEl().find("a.link-green").on("click",function(){var b=a.html2md(g),c=a.md2html(b),d=window.open(),e=d.document;e.open("text/html","replace");var f=["html{margin:0;padding:0}","body{margin:0;padding:5px;}","body, td {font-size:14px;line-height:20px;}","body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",'body{background-color:transparent;font-family:arial,STHeiti,"Microsoft YaHei";line-height:1.8}',"table{width:100%;}","p{line-height:1.8}","h1,h2,h3,h4,h5,h6{margin:10px 0}","img{max-width:100%}",'blockquote{position:relative;color: #999;font-weight:300;font-family:Avenir, "Helvetica Neue", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", sans-serif;border-left:2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;}',"pre{font-size: 14px;position: relative;border-left: 2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;background: #fefefe;word-break:break-all;}","a{color:#25bb9b;text-decoration:none;}"].join("");e.write("<html><head><title>预览</title><style>"+f+"</style></head><body>"+c+"</body></html>"),e.close()})})}var f=a("nc"),g=a("cpn"),h=f.$,i=f.Base,j=f.Clazz,k=g.Popup,l=c.exports=j.create();i.extend(l.prototype,{initialize:d,changeEditor:e})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/monitContent",["nc"],function(a,b,c){function d(a){function b(){a.waitCreated(function(){try{var b=(new Date).getTime();if(c){if(b-c>i){var g=d||"",h=f.trim(a.val());c=b,d=h,h!==g&&(a.fire("draftChange"),e.draftChange&&e.draftChange.call(a,h))}}else c=b}catch(j){}})}var c,d,e=a.rawConfig;if(e.draftChange){var g=window.setInterval(b,2*i);a.listen("destroy",function(){window.clearInterval(g)})}a.listen("afterChange",b)}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=800,j=c.exports=h.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/placeholder",["nc"],function(a,b,c){function d(a){var b,c,d,e=a.rawConfig,g=f(a.getEditorDoc()),h=g.get(0).body;g.on("mousedown",d=function(){b&&(a.removePlaceHolder(),b=!0),g.unbind("mousedown",d)}),e.placeholder&&a.isEmpty()&&(h.innerHTML='<div id="kePlaceholder" style="color:#ddd;">'+e.placeholder+"</div>",b=!0),a.listen("afterBlur",function(){e.placeholder&&""===a.val()&&(h.innerHTML='<div id="kePlaceholder" style="color:#ddd;">'+e.placeholder+"</div>",b=!0)}),a.listen("afterFocus",function(){a.removePlaceHolder(),c||(c=window.setTimeout(function(){a.removePlaceHolder(),c=null},0))})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=c.exports=h.create();g.extend(i.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/toolbar",["nc","cpn","../../../select"],function(a,b,c){function d(a){var b=this;b.editor=a,b.initFullScreen(),b.initTips(),b.initFix(),b.initCodeSelect()}function e(){var a=this,b=a.editor,c=b.rawConfig;if(c.fullScreen){var d=k('<a href="javaScript:void(0);" class="full-ico"></a>');b.getToolbarEl().append(d),d.on("click",c.fullScreen)}}function f(){var a=this,b=a.editor,c=(b.rawConfig,b.getToolbarEl()),d=c.find("span.ke-outline");p.titleEl(d,{verReverse:!0},function(a){b.pushChild(a)})}function g(){function a(){(0===p&&q||p>0)&&(q&&window.setTimeout(b,1200),!q&&b(),q=!1)}function b(){m(function(){p++;var a=j.outerHeight(),b=h.scrollTop(),c=n.getPosTop(j);b+i>c&&c+a>b+i+g?(f||(f=l.width()||0),l.css("width",f),j.addClass("fixed-eidt-header"),l.css("top",i)):(j.removeClass("fixed-eidt-header"),l.css("top",null),l.css("width","auto"))})}var c=this,d=c.editor,e=d.rawConfig;if(!e.noToolbarFixed){var f,g,h=k(window),i=+e.toolbarFixedTop||0,j=d.getEditorEl(),l=d.getToolbarEl(),m=o.frequency(10),p=0,q=!0;g=l.outerHeight(),h.on("scroll",a),d.listen("destroy",function(){h.unbind("scroll",a)})}}function h(){function a(a){var b=c.getToolbarEl(),d=new q({renderTo:b,renderBy:"prepend",size:"small",text:"代码语言",options:[{text:"ASP/VB",value:"vb"},{text:"C/C++",value:"cpp"},{text:"CSS",value:"css"},{text:"C#",value:"cs"},{text:"HTML",value:"html"},{text:"Java",value:"java"},{text:"JavaScript",value:"js"},{text:"Perl",value:"pl"},{text:"PHP",value:"php"},{text:"Python",value:"py"},{text:"Ruby",value:"rb"},{text:"Shell",value:"bsh"},{text:"XML",value:"xml"},{text:"其他",value:""}],change:function(){var b=this.val();c.removePlaceHolder(),a.select();var d=a.cmd.commonNode({pre:"*"});if(!d&&(a.exec("formatblock","<pre>"),d=a.cmd.commonNode({pre:"*"}))){try{a.cmd.range.selectNodeContents(d),a.cmd.removeformat()}catch(e){}d.addClass("prettyprint"),d.next()||d.after("<br />")}k(d).removeClass().addClass("prettyprint "+(b?"lang-"+b:"")),a.select(),c.fire("afterChange")}});return d}var b=this,c=b.editor,d=c.rawConfig;if(!d.noCodeSelect){var e=c.keEditor,f=a(e);c.listen("afterChange",function(){var a=e.edit.cmd.range,b=c.isInTagNode(a.startContainer,"pre")||c.isInTagNode(a.endContainer,"pre");if(b){var d=e.cmd.commonNode({pre:"*"});if(d){var g=d.attr("class")||"",h=/lang-(.*)/.exec(g),i=h?h[1]||"":"";f.val(i)}}else f.clear()})}}var i=a("nc"),j=a("cpn"),k=i.$,l=i.Base,m=i.Clazz,n=i.Dom,o=i.Time,p=j.Tips,q=a("../../../select"),r=c.exports=m.create();l.extend(r.prototype,{initialize:d,initFullScreen:e,initTips:f,initFix:g,initCodeSelect:h})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/uploadPaste",["nc","cpn"],function(a,b,c){function d(a){function b(){return j||(j=f.PopupUploadTips.show({}),j.popup.listen("close",function(){j=null})),j}var c=a.rawConfig;if(!c.noPasteUpload){var d=a.getEditor(),h=a.getEditorDoc();i.bindPaste(h,h.body,function(a){var c=g.find(a,function(a){return"file"===a.kind&&/image/.test(a.type||"")}),f=c?c.getAsFile():null;if(f){var h=new e.Upload({url:"/uploadImage?type=1",progress:function(a){var c=b();c.showProgress("正在上传："+a+"%",a)},error:function(){var a=b();a.showError("上传失败")},call:function(a){var c=b();c.close(),d.exec("insertimage",a.url)}});h.uploadBlob(f,(new Date).getTime()+"."+f.type.split("/").pop())}});var j}}var e=a("nc"),f=a("cpn"),g=(e.$,e.Base),h=e.Clazz,i=e.Dom,j=c.exports=h.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.983/javascripts/component/editorSub/hEditor/plugin/uploadRemote",["nc","cpn","../../../../util/uploadRemote"],function(a,b,c){function d(a){function b(){if(!e){var b=a.getEditorDoc(),d=g(b.body).find("img"),f=d.length;if(0!==f){var i=h.map(d,function(a){return g.trim(g(a).attr("src"))});if(k.canUpload(i)){var j=c();e=!0;var l=0;h.forEach(d,function(a){a=g(a);var b=g.trim(a.attr("src"));k.upload(b,function(c){c&&c!==b&&(a.attr("src",c),a.attr("data-ke-src",c)),l++,l>=f&&(e=!1,j.close())})})}}}}function c(){return new j({hasNoTitle:!0,hasNoFooter:!0,noUnique:!0,content:'<div style="font-size:14px;text-align:center;">图片上传中...</div>'})}var d=a.rawConfig;if(!d.noUploadRemote){var e=!1;a.listen("draftChange",b),b()}}var e=a("nc"),f=a("cpn"),g=e.$,h=e.Base,i=e.Clazz,j=f.Popup,k=a("../../../../util/uploadRemote"),l=c.exports=i.create();h.extend(l.prototype,{initialize:d})});